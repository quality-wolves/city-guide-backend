%h3.page-title
  =sprintf("Edit \"%s\" Hotspot", @hotspot.category.capitalize)
=simple_form_for @hotspot, :html => { :multipart => true, :role => "form" }, url: hotspot_path(@hotspot), method: :patch do |f|
  .form-body  
    = f.simple_fields_for :hotspot_images do |image|
      = render 'hotspot_image_fields', :f => image
    .links
      = link_to_add_association f, :hotspot_images, :class => 'btn btn-success' do
        %i.fa.fa-plus
        %span
          ='add image'
    = render partial: "input", locals: {model:@hotspot,form:f,method:"text_field",field_name:"name",options:{class: 'form-control input-medium'}}
    = render partial: "input", locals: {model:@hotspot,form:f,method:"check_box",field_name:"is_primary",options:{class: 'icheck'}}
    = render partial: "input", locals: {model:@hotspot,form:f,method:"telephone_field",field_name:"phone",options:{class: 'form-control input-medium'}}
    = render partial: "input", locals: {model:@hotspot,form:f,method:"text_field",field_name:"site",options:{class: 'form-control input-medium'}}
    = render partial: "input", locals: {model:@hotspot,form:f,method:"text_area",field_name:"description",options:{class: 'form-control col-md-12', style: 'resize: vertical'}}
        
    .form-group
      = f.label :address
      .map-wrapper{:style=>'width:100%;height:500px',:data =>{:zoom=>{:control=>"true","control-options"=>"{\"style\":\"maps.ZoomControlStyle.MEDIUM\",\"position\":\"maps.ControlPosition.LEFT_TOP\"}"},:custom=>{:controls=>'[{"type":"searchInput","selector":".search","position":"TOP_LEFT"}]',:center=>[@hotspot.lat,@hotspot.lng].to_json}}}
        .map{:style=>'width:100%;height:100%'}
        .input-icon.right.search{:style=>'width: 100%;'}
          =f.text_field :address, {:class => 'form-control col-md-12', :data => {:components => {latSelector:"[role=\"lat\"]",lngSelector:"[role=\"lng\"]"}.to_json }, :maxlength => '512', :autocomplete => 'off' }
          = f.hidden_field :lat, role: 'lat'
          = f.hidden_field :lng, role: 'lng'
  .form-actions
    = f.submit 'Update', :class => 'btn blue'
    = link_to 'Back', hotspot_path(@hotspot), class: 'btn default'